---
import ThemeToggleButton from "@components/shared/ThemeToggleButton.tsx";
import "./Navbar.css";
---

<header id="main-navbar" class="header">
  <nav class="nav-container" aria-label="Main navigation">
    <div class="nav-content">
      <!-- Mobile Toggle -->
      <div class="menu-icon-wrapper">
        <button
          id="menu-toggle-btn"
          class="menu-icon-button"
          aria-label="Toggle menu"
          aria-expanded="false"
          aria-controls="main-menu"
        >
          <svg
            class="open-icon"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 50 50"
            aria-hidden="true"
            fill="currentColor"
          >
            <title>Open menu icon</title>
            <path
              d="M 3 8 A 2.0002 2.0002 0 1 0 3 12 L 47 12 A 2.0002 2.0002 0 1 0 47 8 L 3 8 z M 3 23 A 2.0002 2.0002 0 1 0 3 27 L 47 27 A 2.0002 2.0002 0 1 0 47 23 L 3 23 z M 3 38 A 2.0002 2.0002 0 1 0 3 42 L 47 42 A 2.0002 2.0002 0 1 0 47 38 L 3 38 z"
            ></path>
          </svg>
        </button>
      </div>

      <!-- Left: Home Link -->
      <a href="/" class="home-link desktop-home-link" aria-label="Jeffrey Luu Home">
        <svg
          viewBox="0 0 32 32"
          xmlns="http://www.w3.org/2000/svg"
          class="home-icon"
          aria-hidden="true"
        >
          <path
            fill="currentColor"
            d="M27 18.039L16 9.501 5 18.039V14.56l11-8.54 11 8.538v3.481zm-2.75-.31v8.251h-5.5v-5.5h-5.5v5.5h-5.5v-8.25L16 11.543l8.25 6.186z"
          ></path>
        </svg>
      </a>

      <!-- Center: Navigation Menu -->
      <div
        id="main-menu"
        class="nav-menu-styles"
        tabindex="-1"
        hidden
        inert
        data-open="false"
        role="dialog"
        aria-modal="true"
        aria-label="Main menu panel"
      >
        <div class="offcanvas-inner">
          <div class="panel-header">
            <a href="/" class="home-link" aria-label="Home">
              <svg
                viewBox="0 0 32 32"
                xmlns="http://www.w3.org/2000/svg"
                class="home-icon"
                aria-hidden="true"
              >
                <path
                  fill="currentColor"
                  d="M27 18.039L16 9.501 5 18.039V14.56l11-8.54 11 8.538v3.481zm-2.75-.31v8.251h-5.5v-5.5h-5.5v5.5h-5.5v-8.25L16 11.543l8.25 6.186z"
                ></path>
              </svg>
            </a>
            <button
              id="menu-close-btn"
              class="menu-close-btn"
              type="button"
              aria-label="Close menu"
              title="Close menu"
            >
              <span class="menu-close-label" aria-hidden="true">Ã—</span>
            </button>
          </div>

          <ul class="nav-list">
            <li class="nav-item">
              <a href="/about" class="nav-link" aria-current={Astro.url.pathname === "/about" ? "page" : undefined}>
                About
              </a>
            </li>
            <li class="nav-item">
              <a href="/work" class="nav-link" aria-current={Astro.url.pathname === "/work" ? "page" : undefined}>
                Work
              </a>
            </li>
            <li class="nav-item">
              <a href="/blog" class="nav-link" aria-current={Astro.url.pathname.startsWith("/blog") ? "page" : undefined}>
                Blog
              </a>
            </li>
            <li class="nav-item">
              <a href="/contact" class="nav-link" aria-current={Astro.url.pathname === "/contact" ? "page" : undefined}>
                Contact
              </a>
            </li>
          </ul>
        </div>
      </div>

      <!-- Right: Theme Toggle -->
      <div class="theme-toggle-container">
        <ThemeToggleButton client:media="(min-width: 768px)" />
      </div>
      <div class="mobile-theme-toggle">
        <ThemeToggleButton client:media="(max-width: 767px)" />
      </div>
    </div>
  </nav>

  <!-- Backdrop -->
  <div id="menu-backdrop" class="menu-backdrop" hidden aria-hidden="true"></div>
</header>

<script>
  import "@scripts/navbar.ts";
</script>