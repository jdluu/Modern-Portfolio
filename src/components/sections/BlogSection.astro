---
import PostsList from "@components/blog/PostsList";
import Post from "@components/blog/Post.astro";
import type { PostIndexItem } from "@app-types/post";
import "./BlogSection.css";
 
// Accept posts from the parent page (server-side fetched in /pages/blog.astro)
const { posts } = Astro.props as { posts: PostIndexItem[] };
 
---
<section class="content-section blog-section">
  <h2 id="blog" class="page-h2">Blog</h2>
 
  <div class="posts-container">
    <!-- Client island: controls, filtering, and pagination -->
    <PostsList client:visible initialItems={posts} />
    
    <!-- Server-rendered list for SEO & initial markup. Client island controls visibility. -->
    <ul class="post-list" role="list">
      {posts.map((post) => (
        <Post item={post} />
      ))}
    </ul>

    <!-- Pagination placeholder for island controls -->
    <div id="posts-pagination-portal" class="posts-pagination-placeholder"></div>
  </div>
</section>
 