---
import PostsList from "../ui/PostsList";
import type { PostIndexItem } from "../../types/post";
 
// Accept posts from the parent page (server-side fetched in /pages/blog.astro)
const { posts } = Astro.props as { posts: PostIndexItem[] };
 
---
<section class="content-section blog-section">
  <h2 id="blog" class="page-h2">Blog</h2>
  <p class="section-desc">
    <strong>Quick Projects and Ideas.</strong>
  </p>
 
  <div class="posts-container">
    <!-- Pass the server-fetched posts into the Solid island. -->
    <PostsList client:load initialItems={posts} />
  </div>
</section>
 
<style>
  .page-h2 {
    font-family: var(--m3-font-family-display);
    font-size: var(--m3-font-headline-large);
    color: var(--m3-color-on-background);
    text-align: center;
    margin-bottom: 1rem;
  }
 
  .section-desc {
    font-size: var(--m3-font-body-large);
    color: var(--m3-color-on-surface-variant);
    text-align: center;
    margin-bottom: 2.5rem;
  }
 
  .content-section.blog-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2.5rem 1rem;
    max-width: 64rem;
    margin: 0 auto;
  }
 
  .posts-container {
    width: 100%;
  }
 
  /* List */
  .post-list { list-style: none; margin: 0; padding: 0; display: grid; row-gap: 1.25rem; } /* space-y-5 */
  .post-item { margin: 0; }
 
  /* Card */
  .post-card {
    display: block;
    width: 100%;
    background-color: var(--m3-color-surface);
    color: var(--m3-color-on-surface);
    text-decoration: none;
    border-bottom: 0 !important;
    border: 2px solid var(--m3-color-outline);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 1px 2px rgba(0,0,0,0.06);
    transition: border-color .2s ease, box-shadow .2s ease, color .2s ease;
  }
  .post-card:hover {
    border-color: var(--m3-color-primary);
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  }
  .post-card:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 4px var(--m3-color-primary) inset,
      0 6px 18px rgba(0,0,0,0.14);
  }
 
  /* Card content */
  .post-card-title {
     margin: 0;
     font-size: clamp(1.6rem, 2vw, 2.25rem);
     font-weight: 600;
     color: var(--m3-color-on-surface);
     transition: color .2s ease;
   }
  .post-card:hover .post-card-title {
    color: var(--m3-color-primary);
  }
 
  .post-card-date {
     display: block;
     margin-top: 0.25rem;
     font-size: clamp(1rem, 0.9vw, 1.125rem);
     color: var(--m3-color-on-surface-variant);
   }
 
  .post-card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 0.75rem;
  }
 
  .tag-chip {
     display: inline-flex;
     align-items: center;
     border-radius: 999px;
     background-color: var(--m3-color-secondary-container);
     color: var(--m3-color-on-secondary-container);
     border: 1px solid var(--m3-color-outline-variant);
     padding: 0.25rem 0.75rem;
     font-size: clamp(0.9rem, 0.8vw, 1rem);
     font-weight: 500;
   }
 
  .post-card-desc {
     margin-top: 0.75rem;
     color: var(--m3-color-on-surface-variant);
     font-size: clamp(1.1rem, 1vw, 1.25rem);
     line-height: 1.7;
   }
 
  /* Basic line clamp without Tailwind plugin */
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
 
  @media (min-width: 640px) {
    .content-section.blog-section { padding-left: 1.5rem; padding-right: 1.5rem; }
  }
  @media (min-width: 1024px) {
    .content-section.blog-section { padding-left: 2rem; padding-right: 2rem; }
  }
</style>