---
import {
	Astronav,
	MenuItems,
	MenuIcon,
	OpenIcon,
	CloseIcon,
} from "astro-navbar";
---

<header class="header">
	<Astronav>
		<nav class="nav-container" aria-label="Main navigation">
			<div class="nav-content">
				<a href="/" class="home-link" aria-label="Home">
					<svg
						viewBox="0 0 32 32"
						xmlns="http://www.w3.org/2000/svg"
						class="home-icon"
						aria-hidden="true"
						focusable="false"
					>
						<path
							d="M27 18.039L16 9.501 5 18.039V14.56l11-8.54 11 8.538v3.481zm-2.75-.31v8.251h-5.5v-5.5h-5.5v5.5h-5.5v-8.25L16 11.543l8.25 6.186z"
						></path>
					</svg>
					<span class="home-text">Home</span>
				</a>

				<div class="menu-icon-container">
					<MenuIcon class="menu-icon-svg">
						<OpenIcon>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 24 24"
								stroke-width="2.5"
								stroke="currentColor"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
							</svg>
						</OpenIcon>
						<CloseIcon>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 24 24"
								stroke-width="2.5"
								stroke="currentColor"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									d="M6 18L18 6M6 6l12 12"></path>
							</svg>
						</CloseIcon>
					</MenuIcon>
				</div>

				<MenuItems class="nav-menu hidden">
					<ul class="nav-list" role="menubar" id="nav-menu-list">
						<li class="nav-item" role="menuitem">
							<a
								href="/about"
								class="nav-link"
								aria-current={Astro.url.pathname === "/about"
									? "page"
									: undefined}
							>
								About
							</a>
						</li>
						<li class="nav-item" role="menuitem">
							<a
								href="/work"
								class="nav-link"
								aria-current={Astro.url.pathname === "/work"
									? "page"
									: undefined}
							>
								Work
							</a>
						</li>
						<li class="nav-item" role="menuitem">
							<a
								href="/blog"
								class="nav-link"
								aria-current={Astro.url.pathname === "/blog"
									? "page"
									: undefined}
							>
								Blog
							</a>
						</li>
						<li class="nav-item" role="menuitem">
							<a
								href="/contact"
								class="nav-link"
								aria-current={Astro.url.pathname === "/contact"
									? "page"
									: undefined}
							>
								Contact
							</a>
						</li>
						<li class="nav-item theme-switch" role="menuitem">
							<div class="theme-switch-wrapper">
								<label class="switch" for="themeSwitch">
									<span class="visually-hidden">Toggle dark theme</span>
									<input
										id="themeSwitch"
										type="checkbox"
										role="switch"
										aria-label="Toggle dark theme"
									/>
									<span class="slider round">
										<svg
											class="sun-icon"
											xmlns="http://www.w3.org/2000/svg"
											viewBox="0 0 24 24"
											fill="none"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
										>
											<circle cx="12" cy="12" r="5"></circle>
											<line x1="12" y1="1" x2="12" y2="3"></line>
											<line x1="12" y1="21" x2="12" y2="23"></line>
											<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
											<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
											<line x1="1" y1="12" x2="3" y2="12"></line>
											<line x1="21" y1="12" x2="23" y2="12"></line>
											<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
											<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
										</svg>
										<svg
											class="moon-icon"
											xmlns="http://www.w3.org/2000/svg"
											viewBox="0 0 24 24"
											fill="none"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
										>
											<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
											></path>
										</svg>
									</span>
								</label>
							</div>
						</li>
					</ul>
				</MenuItems>
			</div>
		</nav>
	</Astronav>
</header>

<style is:global>
	.hidden {
		display: none !important;
	}
</style>

<style>
	.header {
		position: sticky;
		top: 0;
		z-index: 100;
		background: var(--primary-btn-color);
		padding: clamp(0.5rem, 2vw, 1rem);
		border-bottom: 1px solid color-mix(in srgb, var(--accent-color) 80%, black);
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
	}

	.nav-container {
		max-width: 1400px;
		margin: 0 auto;
	}

	.nav-content {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0 clamp(1rem, 3vw, 2rem);
		gap: 1rem;
	}

	.home-link {
		display: flex;
		align-items: center;
		text-decoration: none;
		color: var(--text-color);
		gap: 0.5rem;
		flex-shrink: 0;
	}

	.home-icon {
		width: clamp(40px, 5vw, 60px);
		height: clamp(40px, 5vw, 60px);
		fill: var(--icon-color);
		transition: transform 0.3s ease;
	}

	.home-text {
		font-size: clamp(1.5rem, 3vw, var(--font-xlarge));
		font-weight: bold;
		font-family: var(--font-cursive);
	}

	/* Styling for the MenuIcon container and the icon SVG itself */
	.menu-icon-container {
		display: none;
		cursor: pointer;
		padding: 0.5rem;
	}

	.menu-icon-svg {
		width: 1.75rem; /* Approx 28px */
		height: 1.75rem;
		color: var(--text-color); /* SVG stroke color will inherit this */
	}
	.menu-icon-svg svg {
		display: block;
		width: 100%;
		height: 100%;
	}

	.nav-menu {
		position: absolute;
		top: 100%;
		left: 0;
		right: 0;
		background: var(--primary-btn-color);
		padding: 1rem;
		border-top: 1px solid color-mix(in srgb, var(--text-color) 10%, transparent);
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
	}

	.nav-list {
		display: flex;
		flex-direction: column;
		align-items: stretch;
		gap: 1rem;
		margin: 0;
		padding: 0;
		list-style: none;
	}

	.nav-link {
		display: block;
		text-align: center;
		padding: 0.75rem 1rem;
		color: var(--text-color);
		text-decoration: none;
		font-size: clamp(1rem, 1.5vw, var(--font-large));
		font-weight: bold;
		border-radius: 30px;
		border: 1px solid var(--text-color);
		transition: all 0.3s ease;
		white-space: nowrap;
	}

	.nav-link:hover {
		transform: translateY(-2px);
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	.nav-link[aria-current="page"] {
		background-color: var(--text-color);
		color: var(--primary-btn-color);
	}

	.theme-switch-wrapper {
		display: flex;
		align-items: center;
		margin: 1rem auto;
	}

	.switch {
		position: relative;
		display: inline-block;
		width: 3.75rem;
		height: 2rem;
		cursor: pointer;
	}

	.switch input {
		opacity: 0;
		width: 0;
		height: 0;
	}

	.slider {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-color: #73c0fc;
		border: 1px solid transparent;
		border-radius: 2rem;
		transition:
			background-color 0.4s ease,
			border-color 0.2s ease;
		display: flex;
		align-items: center;
		padding: 0 0.25rem;
	}

	.slider:before {
		position: absolute;
		content: "";
		height: 1.5rem;
		width: 1.5rem;
		left: 0.25rem;
		top: 50%;
		transform: translateY(-50%);
		background-color: white;
		border-radius: 50%;
		transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
		z-index: 1;
		box-shadow:
			0 1px 3px rgba(0, 0, 0, 0.2),
			0 1px 1px rgba(0, 0, 0, 0.14),
			0 2px 1px -1px rgba(0, 0, 0, 0.12);
	}

	input:checked + .slider {
		background-color: #424242;
	}

	input:checked + .slider:before {
		transform: translateX(1.75rem) translateY(-50%);
	}

	input:focus-visible + .slider {
		border-color: var(--accent-color);
		box-shadow: 0 0 0 2px
			color-mix(in srgb, var(--accent-color) 30%, transparent);
	}

	.sun-icon,
	.moon-icon {
		position: absolute;
		width: 1.125rem;
		height: 1.125rem;
		top: 50%;
		transform: translateY(-50%) scale(0.9);
		transition:
			opacity 0.3s ease,
			transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
		z-index: 0;
		stroke-width: 2;
	}

	.sun-icon {
		left: 0.4rem;
		stroke: #ffc400;
		opacity: 1;
		transform: translateY(-50%) scale(1);
	}

	.moon-icon {
		right: 0.4rem;
		stroke: #b0bec5;
		opacity: 0;
	}

	input:checked + .slider .sun-icon {
		opacity: 0;
		transform: translateY(-50%) scale(0.5) rotate(-90deg);
	}

	input:checked + .slider .moon-icon {
		opacity: 1;
		transform: translateY(-50%) scale(1) rotate(0deg);
	}

	.visually-hidden {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}

	/* Media Queries for Desktop Layout */
	@media (min-width: 1025px) {
		.menu-icon-container {
			display: none !important;
		}

		.nav-menu {
			display: flex !important;
			position: static;
			background: transparent;
			padding: 0;
			border-top: none;
			box-shadow: none;
		}

		.nav-list {
			flex-direction: row;
			align-items: center;
			gap: clamp(1rem, 2vw, 1.5rem);
		}

		.nav-link {
			display: inline-block;
			text-align: left;
		}
		.theme-switch-wrapper {
			margin: 0 0 0 1rem;
		}
	}

	@media (max-width: 480px) {
		.nav-content {
			padding: 0 0.5rem;
		}

		.home-text {
			display: none;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.home-icon,
		.nav-link,
		.slider,
		.slider:before,
		.sun-icon,
		.moon-icon,
		.nav-menu {
			transition: none !important;
		}
	}
</style>
