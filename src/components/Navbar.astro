---
import { Astronav, MenuItems, MenuIcon } from "astro-navbar";
---

<header class="header">
	<Astronav>
		<nav class="nav-container" aria-label="Main navigation">
			<div class="nav-content">
				<a href="/" class="home-link" aria-label="Home">
					<svg
						viewBox="0 0 32 32"
						xmlns="http://www.w3.org/2000/svg"
						class="home-icon"
						aria-hidden="true"
						focusable="false"
					>
						<path
							d="M27 18.039L16 9.501 5 18.039V14.56l11-8.54 11 8.538v3.481zm-2.75-.31v8.251h-5.5v-5.5h-5.5v5.5h-5.5v-8.25L16 11.543l8.25 6.186z"
						></path>
					</svg>
					<span class="home-text">Home</span>
				</a>

				<button
					type="button"
					class="menu-button"
					aria-label="Toggle navigation menu"
					aria-expanded="false"
					aria-controls="nav-menu"
				>
					<span class="hamburger">
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
					</span>
				</button>

				<MenuItems class="nav-menu">
					<ul class="nav-list" role="menubar" id="nav-menu">
						<li class="nav-item" role="menuitem">
							<a
								href="/about"
								class="nav-link"
								role="menuitem"
								aria-current={Astro.url.pathname === "/about"
									? "page"
									: undefined}
							>
								About
							</a>
						</li>
						<li class="nav-item" role="menuitem">
							<a
								href="/work"
								class="nav-link"
								role="menuitem"
								aria-current={Astro.url.pathname === "/work"
									? "page"
									: undefined}
							>
								Work
							</a>
						</li>
						<li class="nav-item" role="menuitem">
							<a
								href="/blog"
								class="nav-link"
								role="menuitem"
								aria-current={Astro.url.pathname === "/blog"
									? "page"
									: undefined}
							>
								Blog
							</a>
						</li>
						<li class="nav-item" role="menuitem">
							<a
								href="/contact"
								class="nav-link"
								role="menuitem"
								aria-current={Astro.url.pathname === "/contact"
									? "page"
									: undefined}
							>
								Contact
							</a>
						</li>
						<li class="nav-item theme-switch" role="menuitem">
							<div class="theme-switch-wrapper">
								<label class="switch" for="themeSwitch">
									<input
										id="themeSwitch"
										type="checkbox"
										role="switch"
										aria-label="Toggle dark theme"
									/>
									<span class="slider round" aria-hidden="true"></span>
								</label>
							</div>
						</li>
					</ul>
				</MenuItems>
			</div>
		</nav>
	</Astronav>
</header>

<style>
	.header {
		position: sticky;
		top: 0;
		z-index: 100;
		background: var(--primary-btn-color);
		padding: clamp(0.5rem, 2vw, 1rem);
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	.nav-container {
		max-width: 1400px;
		margin: 0 auto;
	}

	.nav-content {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0 clamp(1rem, 3vw, 2rem);
		gap: 2rem;
	}

	.home-link {
		display: flex;
		align-items: center;
		text-decoration: none;
		color: var(--text-color);
		gap: 0.5rem;
		flex-shrink: 0;
	}

	.home-icon {
		width: clamp(40px, 5vw, 60px);
		height: clamp(40px, 5vw, 60px);
		fill: var(--icon-color);
		transition: transform 0.3s ease;
	}

	.home-text {
		font-size: clamp(1.5rem, 3vw, var(--font-xlarge));
		font-weight: bold;
		font-family: var(--font-cursive);
	}

	.menu-button {
		display: none;
		padding: 0.5rem;
		background: transparent;
		border: none;
		cursor: pointer;
	}

	.hamburger {
		display: flex;
		flex-direction: column;
		gap: 6px;
		width: 30px;
		height: 24px;
	}

	.hamburger-line {
		width: 100%;
		height: 2px;
		background-color: var(--text-color);
		transition: all 0.3s ease;
	}

	.nav-menu {
		flex: 1;
		display: flex;
		justify-content: flex-end;
	}

	.nav-list {
		display: flex;
		align-items: center;
		gap: clamp(1rem, 2vw, 1.5rem);
		margin: 0;
		padding: 0;
		list-style: none;
	}

	.nav-link {
		display: inline-block;
		padding: 0.75rem 1.5rem;
		color: var(--text-color);
		text-decoration: none;
		font-size: clamp(1rem, 1.5vw, var(--font-large));
		font-weight: bold;
		border-radius: 30px;
		border: 1px solid var(--text-color);
		transition: all 0.3s ease;
		white-space: nowrap;
	}

	.nav-link:hover {
		transform: translateY(-2px);
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	.nav-link[aria-current="page"] {
		background-color: var(--text-color);
		color: var(--primary-btn-color);
	}

	/* Theme Toggle Switch */
	.theme-switch-wrapper {
		display: flex;
		align-items: center;
		margin-left: 1rem;
	}

	.switch {
		position: relative;
		display: inline-block;
		width: 3.5rem;
		height: 2rem;
	}

	.switch input {
		opacity: 0;
		width: 0;
		height: 0;
	}

	.slider {
		position: absolute;
		cursor: pointer;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-color: #ccc;
		transition: 0.4s;
		border: 2px solid transparent;
	}

	.slider:before {
		position: absolute;
		content: "";
		height: 1.5rem;
		width: 1.5rem;
		left: 0.25rem;
		bottom: 0.25rem;
		background-color: white;
		transition: 0.4s;
	}

	input:checked + .slider {
		background-color: #2196f3;
	}

	input:focus + .slider {
		border-color: var(--text-color);
	}

	input:checked + .slider:before {
		transform: translateX(1.5rem);
	}

	.slider.round {
		border-radius: 2rem;
	}

	.slider.round:before {
		border-radius: 50%;
	}

	@media (max-width: 1024px) {
		.menu-button {
			display: block;
			order: 1;
		}

		.nav-menu {
			display: none;
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			background: var(--primary-btn-color);
			padding: 1rem;
			border-top: 1px solid rgba(0, 0, 0, 0.1);
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}

		.nav-menu.show {
			display: block;
		}

		.nav-list {
			flex-direction: column;
			align-items: stretch;
			gap: 1rem;
		}

		.nav-link {
			display: block;
			text-align: center;
		}

		.theme-switch {
			margin: 1rem auto;
		}

		/* Hamburger animation */
		.menu-button[aria-expanded="true"] .hamburger-line:nth-child(1) {
			transform: translateY(8px) rotate(45deg);
		}

		.menu-button[aria-expanded="true"] .hamburger-line:nth-child(2) {
			opacity: 0;
		}

		.menu-button[aria-expanded="true"] .hamburger-line:nth-child(3) {
			transform: translateY(-8px) rotate(-45deg);
		}
	}

	@media (max-width: 480px) {
		.nav-content {
			padding: 0 0.5rem;
		}

		.home-text {
			display: none;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.home-icon,
		.nav-link,
		.slider,
		.slider:before,
		.hamburger-line {
			transition: none;
		}
	}
</style>
